import { Meta, Story, Preview } from '@storybook/addon-docs/blocks';
import PieDemo from './PieDemo';
import LineDemo from './LineDemo';

<Meta title="组件|Echarts" />

# useFormatter

useFormatter 是一个辅助 hooks。由于原 echarts 组件中的 formatter 返回值必须是一个 DOM 元素的字符串变量，useFormatter 的作用是将返回值由 ReactNode 转成 String

<Preview>
  <Story name="useFormatter">
    <div>
      <PieDemo></PieDemo>
      <LineDemo></LineDemo>
    </div>
  </Story>
</Preview>

## 在 Pie 中使用

```javascript
import React, { useState } from 'react';
import { Echarts } from '@src/components/common';

const { Pie, useFormatter } = Echarts;

const FormatterItem = props => {
  const { data } = props[0];
  return (
    <div style={{ background: 'rgba(0, 0, 0, 0.5)' }}>
      {data.name}: {data.value}
    </div>
  );
};
const PieDemo = props => {
  const formatter = useFormatter();
  const [dataSource] = useState([
    { name: '吴彦祖', value: 3 },
    { name: '李易峰', value: 3 },
  ]);
  return (
    <Pie.Default
      pieSource={[dataSource]}
      tooltip={{
        backgroundColor: 'rgba(0,0,0,0)',
        formatter: formatter(<FormatterItem></FormatterItem>),
      }}
    ></Pie.Default>
  );
};

export default PieDemo;
```

## 在 Line 中使用

```javascript
import React from 'react';
import { Echarts } from '@src/components/common';
const { Line, useFormatter } = Echarts;

const FormatterItem = props => {
  return (
    <div style={{ background: 'rgba(0, 0, 0, 0.5)' }}>
      {props[0].map((n, i) => (
        <div key={i}>
          {n.axisValue}:{n.data}
        </div>
      ))}
    </div>
  );
};

const LineDemo = props => {
  const formatter = useFormatter();
  return (
    <Line.Default
      xAxis={{ data: ['2001', '2002', '2003', '2004', '2005', '2006', '2007'] }}
      yAxis={[{ name: '年份' }]}
      lineSource={[[1, 4, 5, 6, 2, 4, 6]]}
      barSource={[[2, 3, 4, 5, 6, 7, 2]]}
      tooltip={{
        backgroundColor: 'rgba(0,0,0,0)',
        formatter: formatter(<FormatterItem></FormatterItem>),
      }}
    ></Line.Default>
  );
};

export default LineDemo;
```
